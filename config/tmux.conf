# Claude Orchestrator tmux configuration

# Enable mouse support
set -g mouse on

# Increase scrollback buffer
set -g history-limit 50000

# Better colors
set -g default-terminal "screen-256color"

# Status bar
set -g status-style bg=black,fg=white
set -g status-left '[#S] '
set -g status-right '%H:%M'

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Easy reload
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# Toggle mouse with prefix + m (Ctrl+B then m)
bind m set -g mouse \; display "Mouse: #{?mouse,ON,OFF}"

# Quick pane switching with Alt+arrow
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# --- Smoother touchpad scrolling ---
# TPM - Tmux Plugin Manager
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'

# Scroll only 1 line per tick (default is 3-5, way too fast on touchpad)
set -g @scroll-speed-num-lines-per-scroll 1

# Don't exit copy mode when scrolling past the bottom
set -g @emulate-scroll-for-no-mouse-alternate-buffer "on"

# --- Automatic session logging ---
# Log ALL session output to ~/.claude/logs/tmux/{session}_{datetime}.log
# Each session creation = new timestamped log file (one file per session lifetime)
set-hook -g session-created 'pipe-pane "exec ~/.claude/scripts/tmux-log-pipe.sh \"#{session_name}\""'

# Initialize TPM (MUST be at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
